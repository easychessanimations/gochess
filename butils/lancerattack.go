package butils

/////////////////////////////////////////////////////////////////////
// imports

/////////////////////////////////////////////////////////////////////

// lancer attacks provides masks for all possible lancer directions
// for all possible squares

/////////////////////////////////////////////////////////////////////
// constants

const NUM_LANCER_DIRECTIONS = 8

/////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////
// types

/////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////
// global variables

// LANCER_DIRECTION_TO_DELTA maps lancer directions to corresponding deltas
var LANCER_DIRECTION_TO_DELTA = [NUM_LANCER_DIRECTIONS][2]int{
	{1, 0},   // n
	{1, 1},   // ne
	{0, 1},   // e
	{-1, 1},  // se
	{-1, 0},  // s
	{-1, -1}, // sw
	{0, -1},  // w
	{1, -1},  // nw
}

// LancerDirectionMasksForSquares maps squares and lancer directions to lancer attack masks
var LancerDirectionMasksForSquares [SquareArraySize][NUM_LANCER_DIRECTIONS]Bitboard

/////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////
// global functioons

/////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////
// init

func init() {
	for sq := SquareMinValue; sq <= SquareMaxValue; sq++ {
		for ldi := 0; ldi < NUM_LANCER_DIRECTIONS; ldi++ {
			delta := LANCER_DIRECTION_TO_DELTA[ldi]

			mask := slidingAttack(sq, [][2]int{delta}, BbEmpty)

			LancerDirectionMasksForSquares[sq][ldi] = mask
		}
	}
}

/////////////////////////////////////////////////////////////////////
